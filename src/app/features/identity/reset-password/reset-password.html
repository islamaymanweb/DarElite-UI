<div class="reset-password-container">
  <!-- Background Elements -->
  <div class="background-elements">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
    <div class="background-pattern"></div>
  </div>

  <div class="reset-password-wrapper">
    <!-- Left Side - Visual Section -->
    <div class="reset-visual">
      <div class="visual-content">
        <!-- Brand Section -->
        <div class="brand-section">
          <div class="brand-logo">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
              />
            </svg>
          </div>
          <h1 class="brand-title">Dar Elite</h1>
          <p class="brand-tagline">Secure Your Space</p>
        </div>

        <!-- Security Features -->
        <div class="security-features">
          <div class="feature-item">
            <div class="feature-icon">üîí</div>
            <div class="feature-content">
              <h4>Enhanced Security</h4>
              <p>Your account security is our top priority</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">‚ö°</div>
            <div class="feature-content">
              <h4>Instant Update</h4>
              <p>Changes take effect immediately</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">üõ°Ô∏è</div>
            <div class="feature-content">
              <h4>Protected Access</h4>
              <p>Industry-standard encryption</p>
            </div>
          </div>
        </div>

        <!-- Security Tips -->
        <div class="security-tips">
          <h4>Password Best Practices</h4>
          <ul class="tips-list">
            <li>Use at least 8 characters</li>
            <li>Include numbers and special characters</li>
            <li>Avoid common words and phrases</li>
            <li>Don't reuse old passwords</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Right Side - Form Section -->
    <div class="reset-form-section">
      <div class="form-container">
        <!-- Progress Steps -->
        <div class="progress-steps">
          <div class="step completed">
            <div class="step-number">1</div>
            <span class="step-label">Request</span>
          </div>
          <div class="step-divider"></div>
          <div class="step active">
            <div class="step-number">2</div>
            <span class="step-label">Reset</span>
          </div>
          <div class="step-divider"></div>
          <div class="step">
            <div class="step-number">3</div>
            <span class="step-label">Complete</span>
          </div>
        </div>

        <!-- Form Header -->
        <div class="form-header">
          <h2 class="form-title">Create New Password</h2>
          <p class="form-subtitle">
            Choose a strong, secure password to protect your account
          </p>

          <!-- Security Badge -->
          <div class="security-badge">
            <div class="badge-icon">üîê</div>
            <span>Secure Password Reset</span>
          </div>
        </div>

        <!-- Reset Form -->
        <form [formGroup]="formGroup" (ngSubmit)="Submit()" class="reset-form">
          <!-- New Password Field -->
          <div class="form-group">
            <label class="form-label">New Password</label>
            <div class="input-container">
              <input
                type="password"
                formControlName="password"
                placeholder="Enter your new password"
                class="form-input"
                [class.invalid]="_password?.invalid && _password?.touched"
              />
              <div class="input-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
                  />
                </svg>
              </div>
            </div>

            <!-- Password Strength Indicator -->
            <div class="password-strength" *ngIf="_password?.value">
              <div class="strength-bars">
                <div
                  class="strength-bar"
                  [class]="getPasswordStrengthClass(1)"
                ></div>
                <div
                  class="strength-bar"
                  [class]="getPasswordStrengthClass(2)"
                ></div>
                <div
                  class="strength-bar"
                  [class]="getPasswordStrengthClass(3)"
                ></div>
                <div
                  class="strength-bar"
                  [class]="getPasswordStrengthClass(4)"
                ></div>
              </div>
              <div class="strength-info">
                <span class="strength-text"
                  >{{ getPasswordStrengthText() }}</span
                >
                <span class="strength-percentage"
                  >{{ getPasswordStrength() }}%</span
                >
              </div>
            </div>

            @if (_password?.invalid && _password?.touched) {
            <div class="error-message">
              @if (_password?.errors?.['required']) {
              <span>Password is required</span>
              } @if (_password?.errors?.['pattern']) {
              <span
                >Password must be at least 8 characters with numbers and special
                characters</span
              >
              }
            </div>
            }
          </div>

          <!-- Confirm Password Field -->
          <div class="form-group">
            <label class="form-label">Confirm New Password</label>
            <div class="input-container">
              <input
                type="password"
                formControlName="confirmPassword"
                placeholder="Confirm your new password"
                class="form-input"
                [class.invalid]="(_confirmPassword?.invalid || formGroup.errors?.['passwordMismatch']) && _confirmPassword?.touched"
              />
              <div class="input-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
                  />
                </svg>
              </div>
            </div>

            <!-- Password Match Indicator -->
            <div
              class="password-match"
              *ngIf="_confirmPassword?.value && _password?.value"
            >
              <div
                class="match-indicator"
                [class.matched]="_password?.value === _confirmPassword?.value"
              >
                <span class="match-icon">
                  {{ _password?.value === _confirmPassword?.value ? '‚úì' : '‚úó' }}
                </span>
                <span class="match-text">
                  {{ _password?.value === _confirmPassword?.value ? 'Passwords
                  match' : 'Passwords do not match' }}
                </span>
              </div>
            </div>

            @if ((_confirmPassword?.invalid ||
            formGroup.errors?.['passwordMismatch']) &&
            _confirmPassword?.touched) {
            <div class="error-message">
              @if (_confirmPassword?.errors?.['required']) {
              <span>Please confirm your password</span>
              } @if (formGroup.errors?.['passwordMismatch']) {
              <span>Passwords do not match</span>
              }
            </div>
            }
          </div>

          <!-- Password Requirements -->
          <div class="requirements-card">
            <h5 class="requirements-title">Password Requirements</h5>
            <ul class="requirements-list">
              <li [class.valid]="hasMinLength()">
                <span class="requirement-icon">
                  {{ hasMinLength() ? '‚úì' : '‚óã' }}
                </span>
                At least 8 characters
              </li>
              <li [class.valid]="hasNumber()">
                <span class="requirement-icon">
                  {{ hasNumber() ? '‚úì' : '‚óã' }}
                </span>
                Contains at least one number
              </li>
              <li [class.valid]="hasSpecialChar()">
                <span class="requirement-icon">
                  {{ hasSpecialChar() ? '‚úì' : '‚óã' }}
                </span>
                Contains special character (#$@!.-)
              </li>
              <li [class.valid]="passwordsMatch()">
                <span class="requirement-icon">
                  {{ passwordsMatch() ? '‚úì' : '‚óã' }}
                </span>
                Passwords match
              </li>
            </ul>
          </div>
          <!-- Submit Button -->
          <button
            type="submit"
            class="submit-btn"
            [class.loading]="isLoading()"
            [disabled]="!formGroup.valid || isLoading()"
          >
            @if (isLoading()) {
            <div class="btn-spinner"></div>
            <span>Updating Password...</span>
            } @else {
            <span>Reset Password</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
              />
            </svg>
            }
          </button>

          <!-- Back to Login -->
          <div class="back-to-login">
            <a routerLink="/Account/Login" class="back-link">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 19l-7-7 7-7"
                />
              </svg>
              Back to Sign In
            </a>
          </div>
        </form>

        <!-- Success Message (Hidden by default) -->
        <div class="success-message" *ngIf="showSuccess">
          <div class="success-icon">üéâ</div>
          <h3>Password Updated Successfully!</h3>
          <p>
            Your password has been reset. You can now sign in with your new
            password.
          </p>
          <a routerLink="/Account/Login" class="success-btn">
            Continue to Sign In
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

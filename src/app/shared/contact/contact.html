<!-- Contact Methods -->
<section class="contact-methods" [class.visible]="isVisible()">
  <div class="container">
    <div class="section-header">
      <span class="section-badge">Multiple Ways</span>
      <h2 class="section-title">Choose How to Reach Us</h2>
      <p class="section-subtitle">
        Select your preferred method to get in touch with our team
      </p>
    </div>

    <div class="methods-grid">
      @for (method of contactInfo; track method.title; let i = $index) {
      <div class="method-card" [style.animation-delay]="getStaggerDelay(i)">
        <div
          class="method-icon"
          [style.background]="method.color + '20'"
          [style.border-color]="method.color"
        >
          <span [style.color]="method.color">{{ method.icon }}</span>
        </div>
        <h3 class="method-title">{{ method.title }}</h3>
        <p class="method-description">{{ method.description }}</p>
        <div class="method-details">
          @for (detail of method.details; track $index) {
          <span class="detail-item">{{ detail }}</span>
          }
        </div>
        <div class="method-action">
          @if (method.icon === 'üìç') {
          <button class="action-btn" (click)="setActiveTab('visit')">
            <span>Get Directions</span>
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
              />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
              />
            </svg>
          </button>
          } @else if (method.icon === 'üìû') {
          <a href="tel:+201001234567" class="action-btn">
            <span>Call Now</span>
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
              />
            </svg>
          </a>
          } @else if (method.icon === '‚úâÔ∏è') {
          <a href="mailto:hello@darelite.com" class="action-btn">
            <span>Send Email</span>
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
              />
            </svg>
          </a>
          } @else {
          <button class="action-btn" (click)="setActiveTab('form')">
            <span>Start Chat</span>
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
              />
            </svg>
          </button>
          }
        </div>
      </div>
      }
    </div>
  </div>
</section>

<!-- Main Contact Section -->
<section class="main-contact" [class.visible]="isVisible()">
  <div class="container">
    <div class="contact-tabs">
      <div class="tab-headers">
        <button
          class="tab-header"
          [class.active]="activeTab() === 'form'"
          (click)="setActiveTab('form')"
        >
          <span class="tab-icon">üìù</span>
          <span class="tab-text">Send Message</span>
        </button>
        <button
          class="tab-header"
          [class.active]="activeTab() === 'visit'"
          (click)="setActiveTab('visit')"
        >
          <span class="tab-icon">üìç</span>
          <span class="tab-text">Visit Us</span>
        </button>
        <button
          class="tab-header"
          [class.active]="activeTab() === 'faq'"
          (click)="setActiveTab('faq')"
        >
          <span class="tab-icon">‚ùì</span>
          <span class="tab-text">FAQ</span>
        </button>
      </div>

      <div class="tab-content">
        <!-- Contact Form Tab -->
        @if (activeTab() === 'form') {
        <div class="tab-pane active">
          <div class="form-container">
            <div class="form-header">
              <h3>Personalized Design Consultation</h3>
              <p>
                Tell us about your project and we'll create the perfect solution
              </p>
            </div>

            <form
              [formGroup]="contactFormGroup"
              (ngSubmit)="onSubmit()"
              #contactForm
              class="contact-form"
            >
              <div class="form-row">
                <div class="form-group">
                  <label for="name">Full Name *</label>
                  <input
                    type="text"
                    id="name"
                    formControlName="name"
                    placeholder="Enter your full name"
                    [class.error]="getFieldError('name')"
                  />
                  @if (getFieldError('name')) {
                  <span class="error-message">{{ getFieldError('name') }}</span>
                  }
                </div>

                <div class="form-group">
                  <label for="email">Email Address *</label>
                  <input
                    type="email"
                    id="email"
                    formControlName="email"
                    placeholder="your@email.com"
                    [class.error]="getFieldError('email')"
                  />
                  @if (getFieldError('email')) {
                  <span class="error-message"
                    >{{ getFieldError('email') }}</span
                  >
                  }
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="phone">Phone Number *</label>
                  <input
                    type="tel"
                    id="phone"
                    formControlName="phone"
                    placeholder="+20 100 123 4567"
                    [class.error]="getFieldError('phone')"
                  />
                  @if (getFieldError('phone')) {
                  <span class="error-message"
                    >{{ getFieldError('phone') }}</span
                  >
                  }
                </div>

                <div class="form-group">
                  <label for="subject">Subject *</label>
                  <input
                    type="text"
                    id="subject"
                    formControlName="subject"
                    placeholder="What is this regarding?"
                    [class.error]="getFieldError('subject')"
                  />
                  @if (getFieldError('subject')) {
                  <span class="error-message"
                    >{{ getFieldError('subject') }}</span
                  >
                  }
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="serviceType">Service Needed</label>
                  <select id="serviceType" formControlName="serviceType">
                    <option value="general">General Inquiry</option>
                    <option value="design">Design Consultation</option>
                    <option value="custom">Custom Furniture</option>
                    <option value="commercial">Commercial Project</option>
                    <option value="support">Customer Support</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="budget">Budget Range</label>
                  <select id="budget" formControlName="budget">
                    <option value="low">$1,000 - $5,000</option>
                    <option value="medium">$5,000 - $20,000</option>
                    <option value="high">$20,000 - $50,000</option>
                    <option value="premium">$50,000+</option>
                  </select>
                </div>
              </div>

              <div class="form-group full-width">
                <label for="message">Project Details *</label>
                <textarea
                  id="message"
                  formControlName="message"
                  placeholder="Tell us about your space, style preferences, timeline, and any specific requirements..."
                  rows="5"
                  [class.error]="getFieldError('message')"
                ></textarea>
                @if (getFieldError('message')) {
                <span class="error-message"
                  >{{ getFieldError('message') }}</span
                >
                }
              </div>

              <div class="form-group full-width">
                <label>Preferred Contact Method</label>
                <div class="radio-group">
                  <label class="radio-option">
                    <input
                      type="radio"
                      formControlName="preferredContact"
                      value="email"
                    />
                    <span class="radio-custom"></span>
                    <span>Email</span>
                  </label>
                  <label class="radio-option">
                    <input
                      type="radio"
                      formControlName="preferredContact"
                      value="phone"
                    />
                    <span class="radio-custom"></span>
                    <span>Phone Call</span>
                  </label>
                  <label class="radio-option">
                    <input
                      type="radio"
                      formControlName="preferredContact"
                      value="whatsapp"
                    />
                    <span class="radio-custom"></span>
                    <span>WhatsApp</span>
                  </label>
                </div>
              </div>

              <button
                type="submit"
                class="submit-btn"
                [disabled]="isSubmitting()"
                [class.loading]="isSubmitting()"
              >
                @if (isSubmitting()) {
                <div class="btn-spinner"></div>
                <span>Sending...</span>
                } @else {
                <span>Send Message</span>
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"
                  />
                </svg>
                }
              </button>
            </form>
          </div>
        </div>
        }

        <!-- Visit Us Tab -->
        @if (activeTab() === 'visit') {
        <div class="tab-pane active">
          <div class="visit-container">
            <div class="visit-info">
              <h3>Visit Our Flagship Showroom</h3>
              <p>
                Experience our furniture collections in a beautifully designed
                space
              </p>

              <div class="visit-details">
                <div class="detail-item">
                  <span class="detail-icon">üìç</span>
                  <div class="detail-content">
                    <strong>Address</strong>
                    <span>123 Design District, Cairo, Egypt</span>
                  </div>
                </div>

                <div class="detail-item">
                  <span class="detail-icon">üïí</span>
                  <div class="detail-content">
                    <strong>Opening Hours</strong>
                    <span>Daily: 9:00 AM - 9:00 PM</span>
                  </div>
                </div>

                <div class="detail-item">
                  <span class="detail-icon">üìû</span>
                  <div class="detail-content">
                    <strong>Showroom Phone</strong>
                    <span>+20 100 123 4567</span>
                  </div>
                </div>

                <div class="detail-item">
                  <span class="detail-icon">üöó</span>
                  <div class="detail-content">
                    <strong>Parking</strong>
                    <span>Complimentary valet parking available</span>
                  </div>
                </div>
              </div>

              <div class="visit-features">
                <h4>Showroom Features</h4>
                <div class="features-grid">
                  <div class="feature">
                    <span class="feature-icon">üé®</span>
                    <span>Design Consultation</span>
                  </div>
                  <div class="feature">
                    <span class="feature-icon">‚òï</span>
                    <span>Refreshment Lounge</span>
                  </div>
                  <div class="feature">
                    <span class="feature-icon">üë∂</span>
                    <span>Kids Play Area</span>
                  </div>
                  <div class="feature">
                    <span class="feature-icon">üÖøÔ∏è</span>
                    <span>Free Parking</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="map-container">
              @if (mapLoaded()) {
              <div class="map-placeholder">
                <div class="map-content">
                  <div class="map-marker">
                    <div class="marker-pulse"></div>
                    <div class="marker-icon">üìç</div>
                  </div>
                  <h4>Dar Elite Showroom</h4>
                  <p>123 Design District, Cairo</p>
                  <button class="directions-btn">
                    <span>Get Directions</span>
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5l7 7-7 7"
                      />
                    </svg>
                  </button>
                </div>
              </div>
              } @else {
              <div class="map-loading">
                <div class="loading-spinner"></div>
                <p>Loading map...</p>
              </div>
              }
            </div>
          </div>
        </div>
        }

        <!-- FAQ Tab -->
        @if (activeTab() === 'faq') {
        <div class="tab-pane active">
          <div class="faq-container">
            <div class="faq-header">
              <h3>Frequently Asked Questions</h3>
              <p>Quick answers to common questions about our services</p>
            </div>

            <div class="faq-list">
              @for (faq of faqs; track faq.question; let i = $index) {
              <div class="faq-item" [class.open]="faq.isOpen">
                <div class="faq-question" (click)="toggleFAQ(i)">
                  <span class="question-text">{{ faq.question }}</span>
                  <span class="question-icon"
                    >{{ faq.isOpen ? '‚àí' : '+' }}</span
                  >
                </div>
                @if (faq.isOpen) {
                <div class="faq-answer">
                  <p>{{ faq.answer }}</p>
                </div>
                }
              </div>
              }
            </div>

            <div class="faq-cta">
              <p>Still have questions? We're here to help!</p>
              <button class="cta-btn" (click)="setActiveTab('form')">
                <span>Ask Your Question</span>
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
        }
      </div>
    </div>
  </div>
</section>

<!-- Final CTA -->
<section class="contact-cta" [class.visible]="isVisible()">
  <div class="container">
    <div class="cta-content">
      <h2 class="cta-title">Ready to Transform Your Space?</h2>
      <p class="cta-subtitle">
        Let's discuss your project and create something amazing together
      </p>
      <div class="cta-actions">
        <button class="btn btn-primary" (click)="setActiveTab('form')">
          <span>Start Your Project</span>
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 10V3L4 14h7v7l9-11h-7z"
            />
          </svg>
        </button>
        <a href="tel:+201001234567" class="btn btn-secondary">
          <span>Call Now</span>
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
            />
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>
